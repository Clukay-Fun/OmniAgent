# Feishu Agent æŠ€èƒ½è¯´æ˜Žæ–‡æ¡£

## æ¦‚è¿°

Feishu Agent é‡‡ç”¨ **Skill System** æž¶æž„ï¼Œé€šè¿‡æ„å›¾è¯†åˆ«å°†ç”¨æˆ·è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”æŠ€èƒ½æ‰§è¡Œã€‚

---

## æŠ€èƒ½æ¸…å•

### 1. QuerySkillï¼ˆæ¡ˆä»¶æŸ¥è¯¢ï¼‰

**åŠŸèƒ½**ï¼šæŸ¥è¯¢æ¡ˆä»¶ä¿¡æ¯ã€åº­å®¡å®‰æŽ’ã€å½“äº‹äººç­‰

**è§¦å‘è¯**ï¼š
- æŸ¥ã€æŸ¥è¯¢ã€æŸ¥ä¸€ä¸‹ã€æ‰¾ã€æœç´¢
- æ¡ˆã€æ¡ˆå·ã€æ¡ˆä»¶ã€æ¡ˆå­
- å¼€åº­ã€åº­å®¡ã€å½“äº‹äºº

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·ï¼šæŸ¥ä¸€ä¸‹ä»Šå¤©çš„åº­
ç”¨æˆ·ï¼šæœ¬å‘¨æœ‰ä»€ä¹ˆåº­è¦å¼€
ç”¨æˆ·ï¼šæ‰¾ä¸€ä¸‹æŽå››çš„æ¡ˆå­
ç”¨æˆ·ï¼šï¼ˆ2025ï¼‰ç²¤0306æ°‘åˆ123å· æ¡ˆä»¶è¯¦æƒ…
```

**è¿”å›žå­—æ®µ**ï¼š
- æ¡ˆå·ã€å§”æ‰˜äººã€å¯¹æ–¹å½“äº‹äººã€æ¡ˆç”±
- å®¡ç†æ³•é™¢ã€ç¨‹åºé˜¶æ®µ
- æŸ¥çœ‹è¯¦æƒ…é“¾æŽ¥

---

### 2. SummarySkillï¼ˆç»“æžœæ±‡æ€»ï¼‰

**åŠŸèƒ½**ï¼šå¯¹æŸ¥è¯¢ç»“æžœè¿›è¡Œæ€»ç»“å’Œæ±‡æ€»

**è§¦å‘è¯**ï¼š
- æ€»ç»“ã€æ±‡æ€»ã€æ¦‚æ‹¬ã€æ•´ç†ã€å½’çº³

**è§¦å‘æ–¹å¼**ï¼š
1. å•ç‹¬è§¦å‘ï¼ˆåŸºäºŽä¸Šæ¬¡æŸ¥è¯¢ç»“æžœï¼‰
2. é“¾å¼è§¦å‘ï¼ˆæŸ¥è¯¢åŽè‡ªåŠ¨æ±‡æ€»ï¼‰

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·ï¼šå¸®æˆ‘æ€»ç»“ä¸€ä¸‹ï¼ˆé“¾å¼ï¼šå…ˆæŸ¥è¯¢å†æ±‡æ€»ï¼‰
ç”¨æˆ·ï¼šæ€»ç»“ä¸€ä¸‹åˆšæ‰çš„ç»“æžœ
ç”¨æˆ·ï¼šè¯¦ç»†æ€»ç»“æœ¬å‘¨çš„åº­å®¡å®‰æŽ’
```

**è¾“å‡ºå­—æ®µ**ï¼š
| ç±»åž‹ | å­—æ®µ |
|------|------|
| é»˜è®¤ | æ¡ˆå·ã€æ¡ˆç”±ã€å½“äº‹äººã€å¼€åº­æ—¥ã€ä¸»åŠžå¾‹å¸ˆ |
| æ‰©å±•ï¼ˆè¯¦ç»†æ€»ç»“ï¼‰ | + å®¡ç†æ³•é™¢ã€æ¡ˆä»¶çŠ¶æ€ã€ç¨‹åºé˜¶æ®µ |

---

### 3. ReminderSkillï¼ˆæé†’è®¾ç½®ï¼‰

**åŠŸèƒ½**ï¼šåˆ›å»ºå¾…åŠžæé†’

**è§¦å‘è¯**ï¼š
- æé†’ã€å¾…åŠžã€è®°å¾—ã€åˆ«å¿˜äº†ã€å¤‡å¿˜

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·ï¼šæé†’æˆ‘æ˜Žå¤©å¼€ä¼š
ç”¨æˆ·ï¼šåˆ«å¿˜äº†ä¸‹å‘¨ä¸€äº¤ç­”è¾©çŠ¶
ç”¨æˆ·ï¼šè®°å¾—ä»Šå¤©ä¸‹åˆ3ç‚¹å¼€åº­
```

**æ—¶é—´å¤„ç†**ï¼š
| æƒ…å†µ | å¤„ç† |
|------|------|
| æ˜Žç¡®æ—¶é—´ | ä½¿ç”¨ç”¨æˆ·æŒ‡å®šæ—¶é—´ |
| ä»…æ—¥æœŸæ— æ—¶é—´ | é»˜è®¤å½“å¤© 18:00 |
| æ— æ—¥æœŸæ— æ—¶é—´ | é»˜è®¤ä»Šå¤© 18:00 |

> ðŸ’¡ **æç¤º**ï¼šç¼ºå¤±æ—¶é—´æ—¶ç³»ç»Ÿä¼šå‘ŠçŸ¥é»˜è®¤å€¼ï¼Œç”¨æˆ·å¯å›žå¤ä¿®æ”¹

---

### 4. ChitchatSkillï¼ˆé—²èŠ/å…œåº•ï¼‰

**åŠŸèƒ½**ï¼šå¤„ç†é—®å€™ã€å¸®åŠ©è¯·æ±‚ã€æ— æ³•è¯†åˆ«çš„è¾“å…¥

**è§¦å‘è¯**ï¼š
- ä½ å¥½ã€æ‚¨å¥½ã€å—¨ã€å¸®åŠ©ã€æ€Žä¹ˆç”¨

**å¤„ç†ç­–ç•¥**ï¼š
| åœºæ™¯ | å“åº” |
|------|------|
| é—®å€™ï¼ˆä½ å¥½ã€å—¨ï¼‰ | å‹å¥½é—®å€™ + åŠŸèƒ½å¼•å¯¼ |
| å¸®åŠ©è¯·æ±‚ | åŠŸèƒ½ä»‹ç» |
| æ„Ÿè°¢ | ç¤¼è²Œå›žåº” |
| æ•æ„Ÿè¯é¢˜ | ç¤¼è²Œæ‹’ç­” |
| æ— æ³•è¯†åˆ« | å…œåº•å¼•å¯¼ |

---

## é“¾å¼æŠ€èƒ½

æ”¯æŒå¤šä¸ªæŠ€èƒ½æŒ‰åºæ‰§è¡Œï¼š

| é“¾å¼ | è§¦å‘è¯ | æ‰§è¡Œåºåˆ— |
|------|--------|----------|
| æŸ¥è¯¢+æ±‡æ€» | "å¸®æˆ‘æ€»ç»“"ã€"æ±‡æ€»" | QuerySkill â†’ SummarySkill |

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·ï¼šå¸®æˆ‘æ€»ç»“æœ¬å‘¨çš„åº­å®¡å®‰æŽ’
â†’ Step 1: QuerySkill æŸ¥è¯¢æœ¬å‘¨åº­å®¡
â†’ Step 2: SummarySkill æ±‡æ€»ç»“æžœ
```

---

## è·¯ç”±ç­–ç•¥

```
ç”¨æˆ·è¾“å…¥
    â†“
IntentParserï¼ˆæ„å›¾è¯†åˆ«ï¼‰
    â”œâ”€â”€ è§„åˆ™åŒ¹é…ï¼ˆå…³é”®è¯å¾—åˆ†ï¼‰
    â”‚   â”œâ”€â”€ åˆ†æ•° >= 0.7 â†’ ç›´æŽ¥å‘½ä¸­
    â”‚   â”œâ”€â”€ åˆ†æ•° 0.4-0.7 â†’ LLM ç¡®è®¤
    â”‚   â””â”€â”€ åˆ†æ•° < 0.4 â†’ LLM å®Œå…¨åˆ¤æ–­
    â†“
SkillRouterï¼ˆæŠ€èƒ½è·¯ç”±ï¼‰
    â”œâ”€â”€ å•æŠ€èƒ½æ‰§è¡Œ
    â””â”€â”€ é“¾å¼æ‰§è¡Œï¼ˆmax_hops=2ï¼‰
    â†“
æŠ€èƒ½æ‰§è¡Œ â†’ è¿”å›žç»“æžœ
```

---

## é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | ä¿®æ”¹è€… |
|------|------|--------|
| `config/skills.yaml` | å…³é”®è¯ã€é˜ˆå€¼ã€å­—æ®µé…ç½® | è¿ç»´/äº§å“ |
| `config/prompts.yaml` | LLM Prompt æ¨¡æ¿ | è¿ç»´/äº§å“ |
| `src/core/skills/*.py` | ä¸šåŠ¡é€»è¾‘ä»£ç  | å¼€å‘è€… |

---

## çƒ­æ›´æ–°

- **å‘¨æœŸ**ï¼š60 ç§’è‡ªåŠ¨ reload
- **èŒƒå›´**ï¼š`config/skills.yaml`ã€`config/prompts.yaml`
- **æ— éœ€é‡å¯**ï¼šä¿®æ”¹é…ç½®åŽ 60s å†…ç”Ÿæ•ˆ

---

## ç¤ºä¾‹å¯¹è¯

```
ç”¨æˆ·ï¼šä½ å¥½
åŠ©æ‰‹ï¼šä½ å¥½ï¼æˆ‘æ˜¯æ¡ˆä»¶åŠ©æ‰‹ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢æ¡ˆä»¶ä¿¡æ¯å’Œæœç´¢æ–‡æ¡£ã€‚

ç”¨æˆ·ï¼šæœ¬å‘¨æœ‰ä»€ä¹ˆåº­è¦å¼€
åŠ©æ‰‹ï¼šðŸ“Œ æ¡ˆä»¶æŸ¥è¯¢ç»“æžœï¼ˆå…± 2 æ¡ï¼‰

1ï¸âƒ£ å¼ ä¸‰ vs æŽå››ï½œåˆåŒçº çº·
   â€¢ æ¡ˆå·ï¼šï¼ˆ2025ï¼‰ç²¤0306æ°‘åˆ123å·
   â€¢ æ³•é™¢ï¼šæ·±åœ³å¸‚å®å®‰åŒºäººæ°‘æ³•é™¢
   â€¢ ðŸ”— æŸ¥çœ‹è¯¦æƒ…ï¼šhttps://...

2ï¸âƒ£ çŽ‹äº” vs èµµå…­ï½œåŠ³åŠ¨äº‰è®®
   â€¢ æ¡ˆå·ï¼šï¼ˆ2025ï¼‰ç²¤0306æ°‘åˆ456å·
   â€¢ æ³•é™¢ï¼šæ·±åœ³å¸‚ä¸­çº§äººæ°‘æ³•é™¢
   â€¢ ðŸ”— æŸ¥çœ‹è¯¦æƒ…ï¼šhttps://...

ç”¨æˆ·ï¼šå¸®æˆ‘æ€»ç»“ä¸€ä¸‹
åŠ©æ‰‹ï¼šðŸ“Š æ¡ˆä»¶æ±‡æ€»ï¼ˆå…± 2 æ¡ï¼‰
æœ¬å‘¨å…±æœ‰ 2 åœºåº­å®¡ï¼š
1. åˆåŒçº çº·ï¼ˆå¼ ä¸‰ vs æŽå››ï¼‰- å‘¨äºŒä¸Šåˆ
2. åŠ³åŠ¨äº‰è®®ï¼ˆçŽ‹äº” vs èµµå…­ï¼‰- å‘¨å››ä¸‹åˆ

ç”¨æˆ·ï¼šæé†’æˆ‘æ˜Žå¤©å¸¦ææ–™
åŠ©æ‰‹ï¼šâœ… æé†’å·²åˆ›å»º
ðŸ“Œ å†…å®¹ï¼šå¸¦ææ–™
â° æ—¶é—´ï¼š2026-01-30 18:00
ðŸ’¡ å·²è®¾ç½®ä¸ºæ˜Žå¤© 18:00ï¼Œå¦‚éœ€ä¿®æ”¹è¯·å‘Šè¯‰æˆ‘å…·ä½“æ—¶é—´ã€‚
```
