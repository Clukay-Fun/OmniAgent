# OmniAgent

**å¤šæ¨¡å—æ™ºèƒ½ Agent å¹³å°**ï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒå¤šç§ Agent å®ä¾‹æ¥å…¥ä¸åŒçš„é€šè®¯æ¸ é“ï¼ˆé£ä¹¦ã€å¾®ä¿¡ã€Web ç­‰ï¼‰ã€‚

---

## ğŸ“Š å½“å‰å¼€å‘è¿›åº¦

> æœ€åæ›´æ–°ï¼š2026-02-06

### å·²å®ŒæˆåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|----------|------|------|
| **Webhook æ¥å…¥** | âœ… å®Œæˆ | é£ä¹¦æ¶ˆæ¯å›è°ƒã€éªŒç­¾ã€å»é‡ |
| **æ„å›¾è¯†åˆ«** | âœ… å®Œæˆ | è§„åˆ™ä¼˜å…ˆ + LLM å…œåº• |
| **QuerySkill** | âœ… å®Œæˆ | æ¡ˆä»¶æŸ¥è¯¢ã€å…³é”®è¯/æ—¥æœŸèŒƒå›´æœç´¢ |
| **SummarySkill** | âœ… å®Œæˆ | æŸ¥è¯¢ç»“æœæ±‡æ€» |
| **ReminderSkill** | âœ… å®Œæˆ | æé†’ CRUD + å®šæ—¶æ¨é€ |
| **ChitchatSkill** | âœ… å®Œæˆ | é—®å€™ã€å¸®åŠ©ã€æ•æ„Ÿæ‹’ç­” |
| **äººå‘˜å­—æ®µæœç´¢** | âœ… å®Œæˆ | ä½¿ç”¨ open_id ç²¾ç¡®åŒ¹é…ä¸»åŠå¾‹å¸ˆ |
| **è¡¨æ ¼åˆ«åè¯†åˆ«** | âœ… å®Œæˆ | æ”¯æŒ"æ¡ˆä»¶"â†’"æ¡ˆä»¶é¡¹ç›®æ€»åº“"æ˜ å°„ |
| **MCP å·¥å…·å±‚** | âœ… å®Œæˆ | å¤šç»´è¡¨æ ¼å¢åˆ æŸ¥æ”¹ |

### å¼€å‘ä¸­åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|----------|------|------|
| **CreateSkill** | ğŸš§ å¼€å‘ä¸­ | å¼•å¯¼å¼åˆ›å»ºæ¡ˆä»¶ |
| **UpdateSkill** | ğŸš§ å¼€å‘ä¸­ | å­—æ®µæ›´æ–° |
| **DeleteSkill** | ğŸš§ å¼€å‘ä¸­ | äºŒæ¬¡ç¡®è®¤åˆ é™¤ |
| **å¼€åº­æ—¥æé†’** | ğŸš§ å¼€å‘ä¸­ | è‡ªåŠ¨æ‰«æå¹¶æ¨é€ |

### å¾…å¼€å‘åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|----------|------|------|
| **å‘é‡è®°å¿†** | ğŸ“‹ è§„åˆ’ä¸­ | Chroma + è¯­ä¹‰æ£€ç´¢ |
| **Web Agent** | ğŸ“‹ è§„åˆ’ä¸­ | Web èŠå¤©ç•Œé¢ |
| **WeChat Agent** | ğŸ“‹ è§„åˆ’ä¸­ | å¾®ä¿¡æœºå™¨äºº |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              é€šè®¯æ¸ é“                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â”‚  é£ä¹¦    â”‚    â”‚  å¾®ä¿¡    â”‚    â”‚   Web    â”‚   ...                  â”‚
â”‚         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚               â”‚               â”‚
               â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Agent å®ä¾‹å±‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ Feishu Agent   â”‚  â”‚ WeChat Agent   â”‚  â”‚  Web Agent     â”‚   ...          â”‚
â”‚   â”‚ (å¾‹å¸ˆåŠ©æ‰‹)      â”‚  â”‚ (å¾…å¼€å‘)        â”‚  â”‚ (å¾…å¼€å‘)        â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            å…±äº«åŸºç¡€è®¾æ–½                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Skill ç³»ç»Ÿ   â”‚  â”‚ Soul ç³»ç»Ÿ    â”‚  â”‚ Memory ç³»ç»Ÿ  â”‚  â”‚ MCP Server   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                               â”‚
             â–¼                                               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  LLM æœåŠ¡    â”‚                              â”‚  æ•°æ®å­˜å‚¨     â”‚
      â”‚ (SiliconFlow)â”‚                              â”‚ (PostgreSQL) â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŒæœåŠ¡åˆ†ç¦»æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Feishu Agentï¼ˆDocker:8080 / æœ¬åœ°å¼€å‘:8088ï¼‰        â”‚
â”‚   æŒæœ‰ï¼šFEISHU_BOT_* å‡­è¯                                           â”‚
â”‚   èŒè´£ï¼šWebhookå¤„ç†ã€æ¶ˆæ¯å‘é€ã€æ„å›¾è§£æã€æŠ€èƒ½æ‰§è¡Œ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ HTTP è°ƒç”¨
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MCP Feishu Serverï¼ˆç«¯å£ 8081ï¼‰                     â”‚
â”‚   æŒæœ‰ï¼šFEISHU_DATA_* å‡­è¯                                           â”‚
â”‚   èŒè´£ï¼šå¤šç»´è¡¨æ ¼å‘ç°ã€æœç´¢ã€CRUDã€è¡¨ç»“æ„ç¼“å­˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
OmniAgent/
â”œâ”€â”€ agent/                          # Agent å®ä¾‹ç›®å½•
â”‚   â””â”€â”€ feishu-agent/               # é£ä¹¦ Agent
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ api/                # API å…¥å£ï¼ˆwebhookï¼‰
â”‚       â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚       â”‚   â”‚   â”œâ”€â”€ orchestrator.py # ç¼–æ’å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ intent/         # æ„å›¾è§£æ
â”‚       â”‚   â”‚   â”œâ”€â”€ router/         # æŠ€èƒ½è·¯ç”±
â”‚       â”‚   â”‚   â””â”€â”€ skills/         # æŠ€èƒ½å®ç°
â”‚       â”‚   â”œâ”€â”€ llm/                # LLM å®¢æˆ·ç«¯
â”‚       â”‚   â”œâ”€â”€ mcp/                # MCP å®¢æˆ·ç«¯
â”‚       â”‚   â””â”€â”€ user/               # ç”¨æˆ·èº«ä»½ç®¡ç†
â”‚       â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ workspace/              # è¿è¡Œæ—¶æ•°æ®
â”‚
â”œâ”€â”€ mcp/                            # MCP å·¥å…·æœåŠ¡
â”‚   â””â”€â”€ mcp-feishu-server/          # é£ä¹¦ MCP Server
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ tools/              # å·¥å…·å®ç°
â”‚       â”‚   â””â”€â”€ server/             # HTTP æœåŠ¡
â”‚       â””â”€â”€ config.yaml             # é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ docs/                           # æ–‡æ¡£ï¼ˆå·²æ•´åˆè‡³æ­¤ï¼‰
â”œâ”€â”€ monitoring/                     # ç›‘æ§é…ç½®
â””â”€â”€ docker-compose.yml              # Docker ç¼–æ’
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- PostgreSQL 14+ï¼ˆReminder éœ€è¦ï¼‰
- é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨

### æœ¬åœ°ç«¯å£çº¦å®š

- MCP Feishu Serverï¼ˆtestA æ•°æ®ä¾§ï¼‰ï¼š`8081`
- Feishu Agentï¼ˆtestB æœºå™¨äººä¾§ï¼‰ï¼š`8088`
- ngrok æœ¬åœ° muxï¼š`8090`

### 1. å¯åŠ¨ MCP Server

```bash
cd mcp/mcp-feishu-server
pip install -r requirements.txt
cp .env.example .env  # é…ç½®é£ä¹¦å‡­è¯
python run_server.py
```

æœ¬åœ°å¼€å‘æ¨¡å¼ï¼š`python run_dev.py`ï¼ˆé»˜è®¤ç›‘å¬ `8081`ï¼‰

### 2. å¯åŠ¨ Feishu Agent

```bash
cd agent/feishu-agent
pip install -r requirements.txt
cp .env.example .env  # é…ç½®é£ä¹¦å‡­è¯å’Œ LLM
python run_server.py
```

æœ¬åœ°å¼€å‘æ¨¡å¼ï¼š`python run_dev.py`ï¼ˆé»˜è®¤ç›‘å¬ `8088`ï¼‰

### 3. å¯åŠ¨æœ¬åœ° ngrok muxï¼ˆå•åŸŸåè·¯å¾„è½¬å‘ï¼‰

```bash
python scripts/ngrok_mux.py --port 8090
```

å½“å‰è·¯ç”±ï¼š
- `/feishu/webhook` -> `http://127.0.0.1:8088`

è¯´æ˜ï¼šå½“å‰ä»“åº“ä¸å¯ç”¨è¿è¡Œæ—¶è‡ªåŠ¨åŒ–å…¥å£ï¼Œ`/feishu/events` ä»…åœ¨ `automation_spec` ä¸­ä½œä¸ºæœªæ¥è®¾è®¡ä¿ç•™ã€‚

### 4. å¯åŠ¨ ngrok å¹¶é…ç½®é£ä¹¦ Webhook

```bash
ngrok http 8090 --domain=manubrial-anahi-richly.ngrok-free.dev
```

åœ¨é£ä¹¦å¼€æ”¾å¹³å°é…ç½®äº‹ä»¶è®¢é˜…åœ°å€ï¼š

`https://manubrial-anahi-richly.ngrok-free.dev/feishu/webhook`

è¯´æ˜ï¼š
- æœ¬åœ°å¼€å‘ + ngrok æ—¶ï¼Œngrok å…ˆè½¬å‘åˆ° mux `8090`ï¼Œå†ç”± mux è½¬å‘åˆ° Agent `8088`
- Docker ç¼–æ’æ—¶ï¼ŒAgent é»˜è®¤å¯¹å¤–ç«¯å£æ˜¯ `8080`
- ç»„ç»‡Aï¼ˆæ•°æ®åº”ç”¨ï¼‰ä¸éœ€è¦é…ç½®äº‹ä»¶è®¢é˜…/å›è°ƒ
- ç»„ç»‡Bï¼ˆæœºå™¨äººåº”ç”¨ï¼‰éœ€è¦é…ç½® `im.message.receive_v1`

---

## âš™ï¸ é…ç½®è¯´æ˜

### MCP Server ç¯å¢ƒå˜é‡

```env
# é£ä¹¦åº”ç”¨å‡­è¯
FEISHU_DATA_APP_ID=cli_xxx
FEISHU_DATA_APP_SECRET=xxx

# å¤šç»´è¡¨æ ¼é…ç½®
BITABLE_DOMAIN=xxx
BITABLE_APP_TOKEN=xxx
BITABLE_TABLE_ID=xxx
BITABLE_VIEW_ID=xxx
```

### Feishu Agent ç¯å¢ƒå˜é‡

```env
# é£ä¹¦æœºå™¨äººå‡­è¯
FEISHU_BOT_APP_ID=cli_xxx
FEISHU_BOT_APP_SECRET=xxx
FEISHU_BOT_VERIFICATION_TOKEN=xxx

# LLM é…ç½®
LLM_API_KEY=sk-xxx
LLM_MODEL=internlm/internlm2_5-7b-chat
LLM_API_BASE=https://api.siliconflow.cn/v1

# MCP Server åœ°å€
MCP_SERVER_BASE=http://localhost:8081
```

---

## ğŸ”§ MCP å·¥å…·åˆ—è¡¨

| å·¥å…·å | åŠŸèƒ½ | çŠ¶æ€ |
|--------|------|------|
| `feishu.v1.bitable.list_tables` | åˆ—å‡ºè¡¨æ ¼ | âœ… |
| `feishu.v1.bitable.search` | é€šç”¨æœç´¢ | âœ… |
| `feishu.v1.bitable.search_keyword` | å…³é”®è¯æœç´¢ | âœ… |
| `feishu.v1.bitable.search_exact` | ç²¾ç¡®åŒ¹é… | âœ… |
| `feishu.v1.bitable.search_person` | äººå‘˜å­—æ®µæœç´¢ | âœ… |
| `feishu.v1.bitable.search_date_range` | æ—¥æœŸèŒƒå›´æœç´¢ | âœ… |
| `feishu.v1.bitable.record.get` | è·å–å•æ¡è®°å½• | âœ… |
| `feishu.v1.bitable.record.create` | åˆ›å»ºè®°å½• | âœ… |
| `feishu.v1.bitable.record.update` | æ›´æ–°è®°å½• | âœ… |
| `feishu.v1.bitable.record.delete` | åˆ é™¤è®°å½• | âœ… |
| `feishu.v1.doc.search` | æ–‡æ¡£æœç´¢ | âœ… |

---

## ğŸ“Š ç›‘æ§ä¸å¯è§†åŒ–

- **å¥åº·æ£€æŸ¥**ï¼š`GET /health`
- **æŒ‡æ ‡ç«¯ç‚¹**ï¼š`GET /metrics`ï¼ˆPrometheus æ ¼å¼ï¼‰
- **å¯ç”¨æŒ‡æ ‡**ï¼š
  - `feishu_agent_requests_total` - è¯·æ±‚æ€»æ•°
  - `feishu_agent_skill_executions_total` - æŠ€èƒ½æ‰§è¡Œæ¬¡æ•°
  - `feishu_agent_skill_execution_duration_seconds` - æ‰§è¡Œå»¶è¿Ÿ

### å¯åŠ¨ç›‘æ§

```bash
# Linux/Mac
./monitoring/run_monitoring.sh

# Windows
./monitoring/run_monitoring.ps1
```

è¯´æ˜ï¼š
- monitoring ä¸ºå¯é€‰æ¨¡å—ï¼Œä¸å¯åŠ¨æ—¶å‡ ä¹ä¸å é¢å¤–è¿è¡Œç©ºé—´
- å¯åŠ¨åä¼šåˆ›å»º `prometheus_data` ä¸ `grafana_data` å·å¹¶æŒç»­å¢é•¿ï¼ˆPrometheus é»˜è®¤ä¿ç•™ 15 å¤©ï¼‰

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| 403 Forbidden | åº”ç”¨æƒé™ä¸è¶³ | åœ¨é£ä¹¦å¼€æ”¾å¹³å°é…ç½® `bitable:app` æƒé™ |
| WrongViewId | View ID é…ç½®é”™è¯¯ | æ¸…ç©ºæˆ–æ›´æ–° `BITABLE_VIEW_ID` |
| InvalidFilter | å­—æ®µç±»å‹ä¸åŒ¹é… | äººå‘˜å­—æ®µä½¿ç”¨ `search_person` å·¥å…· |
| æ— æ³•è¯†åˆ«è¡¨æ ¼ | åˆ«åæœªé…ç½® | æ›´æ–° `skills.yaml` ä¸­çš„ `table_aliases` |

åŒç»„ç»‡é…ç½®å»ºè®®ï¼š
- ç»„ç»‡Aï¼ˆtestAï¼‰ï¼šåªé…ç½® `FEISHU_DATA_*`ï¼Œä¸é…ç½®äº‹ä»¶å›è°ƒ
- ç»„ç»‡Bï¼ˆtestBï¼‰ï¼šé…ç½® `FEISHU_BOT_*` + äº‹ä»¶å›è°ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# MCP å¥åº·æ£€æŸ¥
curl http://localhost:8081/health

# Agent å¥åº·æ£€æŸ¥
curl http://localhost:8088/health

# mux å¥åº·æ£€æŸ¥
curl http://localhost:8090/health

# Webhook é“¾è·¯æ¢æµ‹ï¼ˆç» ngrok + mux åˆ° agentï¼‰
curl -i https://manubrial-anahi-richly.ngrok-free.dev/feishu/webhook

# æŸ¥çœ‹å·¥å…·åˆ—è¡¨
curl http://localhost:8081/mcp/tools

# æŸ¥çœ‹è¡¨æ ¼å­—æ®µ
curl http://localhost:8081/bitable/fields

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker compose logs --tail=200 feishu-agent
docker compose logs --tail=200 mcp-feishu-server
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•ç”¨ä¾‹](./TEST.md)
- [MCP Server è¯¦ç»†æ–‡æ¡£](./mcp/mcp-feishu-server/README.md)
- [Feishu Agent è¯¦ç»†æ–‡æ¡£](./agent/feishu-agent/README.md)

---

## ğŸ“„ License

MIT License
